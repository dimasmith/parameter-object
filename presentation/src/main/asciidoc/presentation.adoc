= Extend your compiler
Dmytro Kovalchuk <dimasmith@gmail.com>
:source-highlighter: highlightjs

== Example Service

[source,java]
----
public class UserService {

    @Audit
    public UUID createUser(String username, char[] password) {
        return UUID.randomUUID();
    }
}
----

== Audit Describer

[source,java]
----
public class CreateUserAudit 
    implements AuditDescriber {

    AuditEntry describeIntent(Map<String, Object> parameters) {
        String username = (String) parameters.get("username");
        String message = String.format(
            "creating user %s", username);
        return new AuditEntry.withMessage(message);
    }
}
----

== Source Code

[source,java]
----
public final class CreateUserParameters {
  private final String username;

  private final char[] password;

  CreateUserParameters(String username, char[] password) {
    this.username = username;
    this.password = password;
  }

  private CreateUserParameters(Map<String, Object> parameters) {
    this.username = (String) parameters.get("username");
    this.password = (char[]) parameters.get("password");
  }

  static CreateUserParameters fromMap(
      Map<String, Object> parameters) {

    return new CreateUserParameters(parameters);
  }

  Map<String, Object> toMap() {
    final Map<String, Object> result = new HashMap<>();
    result.put("username", username);
    result.put("password", password);
    return result;
  }

  String getUsername() {
    return username;
  }

  char[] getPassword() {
    return password;
  }
}
----

== Blank screen

You can press `*b*` or `*.*` to blank your current screen.

Hit it again to bring it back.

== Overview

Press the `*esc*` key to get an overview of your slides.

== Including documents from subdir

.include::subdir/_b.adoc[]

include::subdir/_b.adoc[]

== Images

[.thumb]
image::sunset.jpg[scaledwidth=75%]

== Images as background

image::sunset.jpg[background, size=cover]

Try setting an animated GIF.

== Attributes

Press the down arrow key to see the next sub-slide.

=== Attributes Part 1
.Built-in
asciidoctor-version:: {asciidoctor-version}
safe-mode-name:: {safe-mode-name}
docdir:: {docdir}
docfile:: {docfile}
imagesdir:: {imagesdir}

=== Attributes Part 2
.Custom
project-version:: {project-version}
sourcedir:: {sourcedir}
